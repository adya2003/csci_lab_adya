#include <stdio.h>

// Function to process transactions
void process_transactions(int transactions[], int num_transactions, int initial_balance) {
    int balance = initial_balance;
    int tobeprocessed[num_transactions];  // Array to hold unprocessed transactions
    int tobeprocessed_count = 0;  // Counter for unprocessed transactions

    for (int i = 0; i < num_transactions; i++) {
        int transaction = transactions[i];

        // Check if it's a deposit (positive value)
        if (transaction > 0) {
            balance += transaction;
        }
        // Withdrawal (negative value)
        else if (transaction < 0) {
            if (balance + transaction < 0) {  // Insufficient funds
                printf("Transaction %d (amount %d) skipped due to insufficient balance.\n", i, transaction);
                tobeprocessed[tobeprocessed_count++] = transaction;  // Add to unprocessed array
                continue;
            }
            else {
                balance += transaction;  // Process the withdrawal
            }
        }

        // Stop processing if balance reaches zero
        if (balance == 0) {
            printf("Balance reached zero. Stopping further transactions.\n");
            // Add remaining transactions to tobeprocessed
            for (int j = i + 1; j < num_transactions; j++) {
                tobeprocessed[tobeprocessed_count++] = transactions[j];
            }
            break;
        }
    }

    // Print the final balance
    printf("Final balance: %d AED\n", balance);

    // Print unprocessed transactions
    if (tobeprocessed_count > 0) {
        printf("Unprocessed transactions:\n");
        for (int i = 0; i < tobeprocessed_count; i++) {
            printf("%d ", tobeprocessed[i]);
        }
        printf("\n");
    } else {
        printf("All transactions were processed.\n");
    }
}

int main() {
    int transactions[] = {200, -150, -500, -400, -50, -200, 300};
    int num_transactions = sizeof(transactions) / sizeof(transactions[0]);
    int initial_balance = 1000;

    process_transactions(transactions, num_transactions, initial_balance);

    return 0;
}
